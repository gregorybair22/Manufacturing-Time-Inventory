@model ManufacturingTimeTracking.Controllers.OperationsController.PickVm
@{
    ViewData["Title"] = "Pick";
    var msg = TempData["Msg"] as string;
}
<h2>Pick</h2>

@if (!string.IsNullOrWhiteSpace(msg))
{
    <div class="alert alert-success">@msg</div>
}

<div class="alert alert-info">
    Recommended order: <strong>LOCATION → TAG</strong>. For packs, leave Quantity=1 and the pack will be applied automatically. Pick from warehouse and send to Production, Workshop, or a specific station/order.
</div>

<form method="post" class="card p-3">
    @Html.AntiForgeryToken()

    <div class="row g-3">
        <div class="col-md-4">
            <label class="form-label">LOCATION (shelf QR)</label>
            <input class="form-control form-control-lg" name="LocationCode" value="@Model.LocationCode" autofocus />
        </div>
        <div class="col-md-4">
            <label class="form-label">TAG (RFID/QR of item or box)</label>
            <input class="form-control form-control-lg" name="TagCode" value="@Model.TagCode" />
        </div>
        <div class="col-md-2">
            <label class="form-label">Quantity</label>
            <input class="form-control form-control-lg" type="number" min="1" name="Quantity" value="@Model.Quantity" />
        </div>
        <div class="col-md-2">
            <label class="form-label">Destination</label>
            <select class="form-select form-select-lg" name="DestinationType">
                <option value="PROD" selected="@(Model.DestinationType == "PROD")">Production</option>
                <option value="TALLER" selected="@(Model.DestinationType == "TALLER")">Workshop</option>
                <option value="WS" selected="@(Model.DestinationType == "WS")">Station</option>
                <option value="ORDER" selected="@(Model.DestinationType == "ORDER")">Order</option>
                <option value="CUSTOM" selected="@(Model.DestinationType == "CUSTOM")">Other (code)</option>
            </select>
        </div>
    </div>

    <div class="row g-3 mt-1">
        <div class="col-md-6">
            <label class="form-label">Destination reference (if Station/Order/Other)</label>
            <input class="form-control" name="DestinationRef" value="@Model.DestinationRef" placeholder="e.g. WS-01, 2026-0012" />
            <div class="form-text">Station → DEST:WS:&lt;REF&gt;. Order → DEST:PEDIDO:&lt;REF&gt;.</div>
        </div>
    </div>

    @if (!ViewData.ModelState.IsValid)
    {
        <div class="alert alert-danger mt-3">
            @foreach (var err in ViewData.ModelState.Values.SelectMany(v => v.Errors))
            {
                <div>@err.ErrorMessage</div>
            }
        </div>
    }

    <div class="mt-3">
        <button class="btn btn-primary btn-lg">Pick</button>
        <a class="btn btn-outline-secondary" asp-action="Index">Back</a>
    </div>
</form>
