@model ManufacturingTimeTracking.Models.Inventory.Item
@{
    ViewData["Title"] = "Quick add";
}

<div class="animate-fade-in w-full">
    <h1 class="text-2xl font-bold text-slate-800 mb-2">Quick add (QR / RFID)</h1>
    <p class="text-slate-600 mb-6">
        Enter SKU, Name and a code (RFID EPC or QR). The system creates the item if it does not exist and attaches the tag. Optionally link to a process Material so the same product is used in inventory and production.
    </p>

    <div class="bg-white rounded-2xl shadow-soft border border-slate-100 p-6">
        <form asp-action="QuickCreate" method="post" class="space-y-5">
            @Html.AntiForgeryToken()

            <div>
                <label class="block text-sm font-medium text-slate-700 mb-1.5">SKU / Internal code</label>
                <input name="sku" class="w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200" placeholder="e.g. BOLT-M6-20" />
            </div>

            <div>
                <label class="block text-sm font-medium text-slate-700 mb-1.5">Name</label>
                <input name="name" class="w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200" placeholder="e.g. Bolt M6x20 stainless" />
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 gap-5">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Family</label>
                    <input name="family" class="w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200" placeholder="e.g. Motors, Electronics, Hardware" />
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Model / Type</label>
                    <input name="modelOrType" class="w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200" placeholder="e.g. D600, Standard, Premium" />
                </div>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 gap-5">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Unit</label>
                    <input name="unit" class="w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200" placeholder="e.g. ud, pcs, kg, m" value="ud" />
                    <p class="text-slate-500 text-sm mt-1">Unit of measurement (default: ud)</p>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Link to Material (optional)</label>
                    <select name="materialId" class="w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200">
                        <option value="">-- None --</option>
                        @if (ViewBag.Materials != null)
                        {
                            @foreach (var material in (Microsoft.AspNetCore.Mvc.Rendering.SelectList)ViewBag.Materials)
                            {
                                <option value="@material.Value">@material.Text</option>
                            }
                        }
                    </select>
                    <p class="text-slate-500 text-sm mt-1">Link to process material for shared items</p>
                </div>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-4 gap-5">
                <div class="sm:col-span-2">
                    <label class="block text-sm font-medium text-slate-700 mb-1.5">RFID or QR code</label>
                    <input name="tagCode" class="w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200" placeholder="EPC or QR text" />
                    <p class="text-slate-500 text-sm mt-1">If using a keyboard-wedge scanner, place cursor here and scan.</p>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Type</label>
                    <select name="tagType" class="w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200">
                        <option value="RFID">RFID</option>
                        <option value="QR">QR</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Units (pack)</label>
                    <input name="packQuantity" class="w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200" type="number" min="1" value="1" />
                    <p class="text-slate-500 text-sm mt-1">e.g. motor=1, box of bolts=100.</p>
                </div>
            </div>

            <div class="flex items-center gap-2">
                <input type="checkbox" name="isSerialized" value="true" id="isSerialized" class="w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500" />
                <label for="isSerialized" class="text-sm font-medium text-slate-700">Serialized item (always 1 per tag)</label>
            </div>

            @if (!ViewData.ModelState.IsValid)
            {
                <div class="p-4 rounded-xl bg-red-50 border border-red-200 text-red-700 text-sm">
                    @foreach (var err in ViewData.ModelState.Values.SelectMany(v => v.Errors))
                    {
                        <div>@err.ErrorMessage</div>
                    }
                </div>
            }

            <div class="flex flex-wrap gap-3 pt-2 text-center">
            <div class="m-auto">
                <button type="submit" class="px-5 py-2.5 rounded-xl bg-blue-600 text-white font-medium hover:bg-blue-700 shadow-md hover:shadow-lg transition-all duration-200">Create</button>
                <a asp-action="Index" class="px-5 py-2.5 rounded-xl border border-slate-300 text-slate-700 font-medium hover:bg-slate-50 transition-all duration-200">Cancel</a>
                <a asp-action="CreateWithPhoto" class="px-5 py-2.5 rounded-xl border border-blue-300 text-blue-600 font-medium hover:bg-blue-50 transition-all duration-200">Add with photo</a>
            </div>
            </div>
        </form>
    </div>
</div>  
